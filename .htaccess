Options -Indexes
RewriteEngine On

# Ensure correct MIME types for modules
AddType application/javascript .js .mjs
AddType text/css .css

# Block sensitive folders
RewriteRule ^storage/ - [F,L]
RewriteRule ^server/(config|utils)/ - [F,L]

# Landing page
RewriteRule ^$ /public/index.html [L]

# Allow real files/folders
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Share routes
RewriteRule ^s/([0-9A-Za-z]{8,20})$ /server/pages/view.php?id=$1 [L,QSA]
RewriteRule ^embed/([0-9A-Za-z]{8,20})$ /server/pages/embed.php?id=$1 [L,QSA]
